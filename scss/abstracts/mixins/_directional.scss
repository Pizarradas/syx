// SYX MIXINS — DIRECTIONAL (shared)
// ================================================
// Private helpers for null-skipping shorthand properties.
// Used by: _margin.scss, _padding.scss
// Philosophy: Bourbon-compatible API — pass `null` to skip a side.
// ================================================
@use 'sass:list';

// PRIVATE: Transforms shorthand to its shortest possible form.
// @example _syx-compact(10px 20px 10px 20px) → 10px 20px
@function _syx-compact($values) {
  $a: list.nth($values, 1);
  $b: if(list.length($values) < 2, $a, list.nth($values, 2));
  $c: if(list.length($values) < 3, $a, list.nth($values, 3));
  $d: if(list.length($values) < 2, $a, list.nth($values, if(list.length($values) < 4, 2, 4)));

  @if $a == $b and $a == $c and $a == $d { @return $a; }
  @else if $a == $c and $b == $d         { @return $a $b; }
  @else if $b == $d                      { @return $a $b $c; }
  @else                                  { @return $a $b $c $d; }
}

// PRIVATE: Returns true if any item in $list is falsy (null/false).
@function _syx-has-null($list) {
  @each $item in $list {
    @if not $item { @return true; }
  }
  @return false;
}

// PRIVATE: Builds directional properties from CSS shorthand, skipping null sides.
// @param {string} $property  — e.g. 'margin', 'padding'
// @param {string} $suffix    — e.g. null, 'width'
// @param {list}   $values    — shorthand list, nulls skip that side
@mixin syx-directional($property, $suffix, $values) {
  $top:    $property + '-top'    + if($suffix, '-#{$suffix}', '');
  $bottom: $property + '-bottom' + if($suffix, '-#{$suffix}', '');
  $left:   $property + '-left'   + if($suffix, '-#{$suffix}', '');
  $right:  $property + '-right'  + if($suffix, '-#{$suffix}', '');
  $all:    $property             + if($suffix, '-#{$suffix}', '');

  $values: _syx-compact($values);

  @if _syx-has-null($values) {
    // Null-skipping mode — emit only non-null sides
    @if list.nth($values, 1) { #{$top}: list.nth($values, 1); }

    @if list.length($values) == 1 {
      @if list.nth($values, 1) { #{$right}: list.nth($values, 1); }
    } @else {
      @if list.nth($values, 2) { #{$right}: list.nth($values, 2); }
    }

    @if list.length($values) == 2 {
      @if list.nth($values, 1) { #{$bottom}: list.nth($values, 1); }
      @if list.nth($values, 2) { #{$left}: list.nth($values, 2); }
    } @else if list.length($values) == 3 {
      @if list.nth($values, 3) { #{$bottom}: list.nth($values, 3); }
      @if list.nth($values, 2) { #{$left}: list.nth($values, 2); }
    } @else if list.length($values) == 4 {
      @if list.nth($values, 3) { #{$bottom}: list.nth($values, 3); }
      @if list.nth($values, 4) { #{$left}: list.nth($values, 4); }
    }
  } @else {
    // No nulls — emit compact shorthand
    #{$all}: $values;
  }
}
