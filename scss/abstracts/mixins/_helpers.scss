// SYX MIXINS — HELPERS
// ================================================
// Modern utility mixins that complement the SYX mixin library.
// These cover common patterns that previously required Bourbon
// or verbose inline CSS.
// ================================================

// MIXIN: transition($props...)
// Shorthand for transition with automatic prefers-reduced-motion guard.
// @example
//   @include transition(opacity 0.2s ease, transform 0.3s ease);
//   // → transition: opacity 0.2s ease, transform 0.3s ease;
//   //   @media (prefers-reduced-motion: reduce) { transition: none; }
@mixin transition($props...) {
  transition: $props;

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

// MIXIN: truncate($max-width)
// Single-line text truncation with ellipsis.
// @example
//   @include truncate(200px);
//   // → max-width: 200px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;
@mixin truncate($max-width: 100%) {
  max-width: $max-width;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

// MIXIN: sr-only()
// Visually hides an element while keeping it accessible to screen readers.
// Replaces the older hide-visually() mixin with the modern WCAG-recommended approach.
// @example
//   .skip-link { @include sr-only(); }
@mixin sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// MIXIN: sr-only-reset()
// Reverses sr-only() — makes a previously hidden element visible again.
@mixin sr-only-reset {
  position: static;
  width: auto;
  height: auto;
  padding: 0;
  margin: 0;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

// MIXIN: focus-ring($color, $offset)
// Accessible focus outline using outline (not box-shadow, which is clipped).
// @example
//   a:focus-visible { @include focus-ring(); }
@mixin focus-ring($color: var(--semantic-color-state-focus), $offset: 3px) {
  outline: 2px solid $color;
  outline-offset: $offset;
}

// MIXIN: flex-center()
// Centers children both horizontally and vertically with flexbox.
// @example
//   .icon-wrapper { @include flex-center(); }
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

// MIXIN: flex-between()
// Space-between row layout — common for navbars, card headers, etc.
@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

// MIXIN: aspect-ratio($width, $height)
// Native aspect-ratio with a padding-top fallback for older browsers.
// @example
//   .video-embed { @include aspect-ratio(16, 9); }
@mixin aspect-ratio($width, $height) {
  aspect-ratio: #{$width} / #{$height};

  // Fallback for browsers without aspect-ratio support
  @supports not (aspect-ratio: 1) {
    &::before {
      content: '';
      display: block;
      padding-top: percentage(calc($height / $width));
    }
  }
}

// MIXIN: clearfix()
// Modern clearfix using display: flow-root (no pseudo-element needed).
// Falls back to the classic ::after method for older browsers.
@mixin clearfix {
  display: flow-root;

  @supports not (display: flow-root) {
    &::after {
      content: '';
      display: table;
      clear: both;
    }
  }
}

// MIXIN: ellipsis($lines)
// Multi-line text truncation with ellipsis.
// @example
//   @include ellipsis(3); // clamps to 3 lines
@mixin ellipsis($lines: 1) {
  @if $lines == 1 {
    @include truncate();
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
